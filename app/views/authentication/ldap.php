<?php$errors = validation_errors();if ($errors){	echo '<div class="row">';	echo $this->msg->err('<ul class="square">' . $errors . '</ul>', 'Please check the following invalid item(s) and try again.');	echo '</div>';}?><?phpecho form_open('authentication/save_ldap');// Start tabindex$t = 1;?><div class="alpha three columns"><h6>Server settings</h6></div><div class="omega nine columns">	<label for="auth_ldap_host">Hostname or IP address</label>	<?php	unset($input);	$input['accesskey'] = 'H';	$input['name'] = 'auth_ldap_host';	$input['id'] = 'auth_ldap_host';	$input['size'] = '30';	$input['maxlength'] = '100';	$input['tabindex'] = $t;	$input['value'] = set_value('auth_ldap_host', $settings['auth_ldap_host']);	echo form_input($input);	$t++;	?>		<label for="auth_ldap_port">Port</label>	<?php	unset($input);	$input['accesskey'] = 'P';	$input['name'] = 'auth_ldap_port';	$input['id'] = 'auth_ldap_port';	$input['size'] = '5';	$input['maxlength'] = '5';	$input['tabindex'] = $t;	$input['value'] = set_value($input['name'], 		($settings['auth_ldap_port']) ? $settings['auth_ldap_port'] : '389');	echo form_input($input);	$t++;	?>		<label for="auth_ldap_base">Base DNs</label>	<?php	unset($input);	$input['accesskey'] = 'D';	$input['name'] = 'auth_ldap_base';	$input['id'] = 'auth_ldap_base';	$input['maxlength'] = '65535';	$input['tabindex'] = $t;	$input['rows'] = '6';	$input['cols'] = '60';	$input['value'] = set_value($input['name'], $settings['auth_ldap_base']);	echo form_textarea($input);	$t++;	?>		<label for="auth_ldap_filter">Query filter</label>	<?php	unset($input);	$default = '(& (| (!(displayname=Administrator*)) (!(displayname=Admin*)) ) (cn=%u) )';	$input['accesskey'] = 'F';	$input['name'] = 'auth_ldap_filter';	$input['id'] = 'auth_ldap_filter';	$input['maxlength'] = '5120';	$input['tabindex'] = $t;	$input['rows'] = '4';	$input['cols'] = '60';	$input['value'] = set_value('auth_ldap_filter', 		($settings['auth_ldap_filter']) ? $settings['auth_ldap_filter'] : $default);	$input['class'] = 'remove-bottom';	echo form_textarea($input);	$t++;	?>	<p class="hint"><strong>%u</strong> is the supplied username.</p></div><hr><div class="alpha three columns"><h6>Integration</h6></div><div class="omega nine columns">		<label for="auth_ldap_groupid">Default Classroombookings group</label>	<?php	echo form_dropdown(		'auth_ldap_groupid', 		$groups, 		set_value(			'auth_ldap_groupid', 			(isset($settings['auth_ldap_groupid'])) ? $settings['auth_ldap_groupid'] : 0		), 		'tabindex="' . $t . '" id="auth_ldap_groupid"'	);	$t++;	?>	<fieldset>		<label for="auth_ldap_loginupdate">			<?php			echo form_hidden('auth_ldap_loginupdate', '0');			unset($check);			$check['name'] = 'auth_ldap_loginupdate';			$check['id'] = 'auth_ldap_loginupdate';			$check['value'] = '1';			$check['checked'] = set_checkbox($check['name'], $check['value'], ($settings['auth_ldap_loginupdate'] == 1));			$check['tabindex'] = $t;			echo form_checkbox($check);			$t++;			?>			<span>Update details at every login</span>		</label>		<p class="hint">If this option is enabled, the user details (display name, group and department membership) will be updated with their LDAP info every time they login; potentially un-doing any customisations you made to the user.</p>	</fieldset></div><hr><div class="alpha three columns"><h6>Test settings</h6></div><div class="omega nine columns">	<label for="ldaptestuser">Username</label>	<?php	unset($input);	$input['accesskey'] = 'U';	$input['name'] = 'ldaptestuser';	$input['id'] = 'ldaptestuser';	$input['size'] = '20';	$input['maxlength'] = '50';	$input['tabindex'] = $t;	$input['autocomplete'] = 'off';	$input['value'] = set_value('ldaptestuser');	echo form_input($input);	$t++;	?>		<label for="ldaptestpassword">Password</label>	<?php	unset($input);	$input['accesskey'] = 'W';	$input['name'] = 'ldaptestpass';	$input['id'] = 'ldaptestpass';	$input['size'] = '20';	$input['maxlength'] = '50';	$input['tabindex'] = $t;	$input['autocomplete'] = 'off';	$input['value'] = set_value('ldaptestpass');	echo form_password($input);	$t++;	?>		<?php	unset($buttons);	$buttons[] = array('button', 'add-bottom', 'Test settings...', $t);	$this->load->view('parts/buttons', array('buttons' => $buttons));	$t++;	?>	</div><hr>	<div class="row"><div class="alpha three columns">&nbsp;</div><div class="omega nine columns"><?phpunset($buttons);$buttons[] = array('submit', 'blue', lang('ACTION_SAVE') . ' LDAP ' . strtolower(lang('W_SETTINGS')), $t);$this->load->view('parts/buttons', array('buttons' => $buttons));?></div></div></form>